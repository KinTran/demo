"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[1492],{9432:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>i});var c=t(4848),s=t(8453);const r={title:"Callbacks"},o=void 0,l={id:"concepts/components/callbacks",title:"Callbacks",description:"Callbacks",source:"@site/versioned_docs/version-0.19.0/concepts/components/callbacks.mdx",sourceDirName:"concepts/components",slug:"/concepts/components/callbacks",permalink:"/ja/docs/0.19.0/concepts/components/callbacks",draft:!1,unlisted:!1,editUrl:"https://google.com/versioned_docs/version-0.19.0/concepts/components/callbacks.mdx",tags:[],version:"0.19.0",frontMatter:{title:"Callbacks"},sidebar:"docs",previous:{title:"Introduction",permalink:"/ja/docs/0.19.0/concepts/components/introduction"},next:{title:"Scope",permalink:"/ja/docs/0.19.0/concepts/components/scope"}},a={},i=[{value:"Callbacks",id:"callbacks",level:2},{value:"Relevant examples",id:"relevant-examples",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"callbacks",children:"Callbacks"}),"\n",(0,c.jsxs)(n.p,{children:["Callbacks are used to communicate with services, agents, and parent components within Yew.\r\nInternally their type is just ",(0,c.jsx)(n.code,{children:"Fn"})," wrapped in ",(0,c.jsx)(n.code,{children:"Rc"})," to allow them to be cloned."]}),"\n",(0,c.jsxs)(n.p,{children:["They have an ",(0,c.jsx)(n.code,{children:"emit"})," function that takes their ",(0,c.jsx)(n.code,{children:"<IN>"})," type as an argument and converts that to a message expected by its destination. If a callback from a parent is provided in props to a child component, the child can call ",(0,c.jsx)(n.code,{children:"emit"})," on the callback in its ",(0,c.jsx)(n.code,{children:"update"})," lifecycle hook to send a message back to its parent. Closures or Functions provided as props inside the ",(0,c.jsx)(n.code,{children:"html!"})," macro are automatically converted to Callbacks."]}),"\n",(0,c.jsx)(n.p,{children:"A simple use of a callback might look something like this:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-rust",children:'use yew::{html, Component, Context, Html};\r\n\r\nenum Msg {\r\n    Clicked,\r\n}\r\n\r\nstruct Comp;\r\n\r\nimpl Component for Comp {\r\n\r\n    type Message = Msg;\r\n    type Properties = ();\r\n\r\n    fn create(_ctx: &Context<Self>) -> Self {\r\n        Self\r\n    }\r\n\r\n    fn view(&self, ctx: &Context<Self>) -> Html {\r\n        // highlight-next-line\r\n        let onclick = ctx.link().callback(|_| Msg::Clicked);\r\n        html! {\r\n            // highlight-next-line\r\n            <button {onclick}>{ "Click" }</button>\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,c.jsxs)(n.p,{children:["The function passed to ",(0,c.jsx)(n.code,{children:"callback"})," must always take a parameter. For example, the ",(0,c.jsx)(n.code,{children:"onclick"})," handler requires a function which takes a parameter of type ",(0,c.jsx)(n.code,{children:"MouseEvent"}),". The handler can then decide what kind of message should be sent to the component. This message is scheduled for the next update loop unconditionally."]}),"\n",(0,c.jsxs)(n.p,{children:["If you need a callback that might not need to cause an update, use ",(0,c.jsx)(n.code,{children:"batch_callback"}),"."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-rust",children:'use yew::{events::KeyboardEvent, html, Component, Context, Html};\r\n\r\nenum Msg {\r\n    Submit,\r\n}\r\n\r\nstruct Comp;\r\n\r\nimpl Component for Comp {\r\n\r\n    type Message = Msg;\r\n    type Properties = ();\r\n\r\n    fn create(_ctx: &Context<Self>) -> Self {\r\n        Self\r\n    }\r\n\r\n    fn view(&self, ctx: &Context<Self>) -> Html {\r\n        // highlight-start\r\n        let onkeypress = ctx.link().batch_callback(|event: KeyboardEvent| {\r\n            if event.key() == "Enter" {\r\n                Some(Msg::Submit)\r\n            } else {\r\n                None\r\n            }\r\n        });\r\n\r\n        html! {\r\n            <input type="text" {onkeypress} />\r\n        }\r\n        // highlight-end\r\n    }\r\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"relevant-examples",children:"Relevant examples"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://github.com/yewstack/yew/tree/yew-v0.19.3/examples/counter",children:"Counter"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://github.com/yewstack/yew/tree/yew-v0.19.3/examples/timer",children:"Timer"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var c=t(6540);const s={},r=c.createContext(s);function o(e){const n=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),c.createElement(r.Provider,{value:n},e.children)}}}]);