"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[2594],{8658:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var o=s(4848),r=s(8453);const t={title:"Debugging"},i=void 0,a={id:"more/debugging",title:"Debugging",description:"Panics",source:"@site/versioned_docs/version-0.18.0/more/debugging.mdx",sourceDirName:"more",slug:"/more/debugging",permalink:"/docs/0.18.0/more/debugging",draft:!1,unlisted:!1,editUrl:"https://google.com/versioned_docs/version-0.18.0/more/debugging.mdx",tags:[],version:"0.18.0",frontMatter:{title:"Debugging"},sidebar:"docs",previous:{title:"Optimizations",permalink:"/docs/0.18.0/advanced-topics/optimizations"},next:{title:"CSS",permalink:"/docs/0.18.0/more/css"}},c={},l=[{value:"Panics",id:"panics",level:2},{value:"Console Logging",id:"console-logging",level:2},{value:"<code>wasm-logger</code>",id:"wasm-logger",level:3},{value:"<code>ConsoleService</code>",id:"consoleservice",level:3},{value:"Source Maps",id:"source-maps",level:2},{value:"Latest Info",id:"latest-info",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"panics",children:"Panics"}),"\n",(0,o.jsxs)(n.p,{children:["We ",(0,o.jsx)(n.strong,{children:"strongly recommend"})," the ",(0,o.jsx)(n.a,{href:"https://github.com/rustwasm/console_error_panic_hook",children:(0,o.jsx)(n.code,{children:"console_error_panic"})}),"\r\nwhich catches ",(0,o.jsx)(n.code,{children:"panic!"}),"s and outputs them to the console. Unfortunately this is not compatible with\r\napps built using ",(0,o.jsx)(n.code,{children:"cargo-web"}),". ",(0,o.jsx)(n.strong,{children:"You probably don't need to enable this manually."})," If you mount your\r\napplication using ",(0,o.jsx)(n.code,{children:"yew::start_app()"}),", Yew will automatically catch ",(0,o.jsx)(n.code,{children:"panic!"}),"s and log them to your\r\nbrowser's console. In some situations you might not be able to use ",(0,o.jsx)(n.code,{children:"yew::start_app()"})," to mount your\r\napplication, in which case you can call ",(0,o.jsx)(n.code,{children:"yew::initialize()"})," before starting your application to\r\nconfigure this. Under the hood ",(0,o.jsx)(n.code,{children:"yew::start_app()"})," calls ",(0,o.jsx)(n.code,{children:"yew::initialize()"})," (which will enable the\r\n",(0,o.jsx)(n.code,{children:"panic!"})," hook)."]}),"\n",(0,o.jsx)(n.h2,{id:"console-logging",children:"Console Logging"}),"\n",(0,o.jsxs)(n.p,{children:["In general, Wasm web apps are able to interact with Browser APIs, and the ",(0,o.jsx)(n.code,{children:"console.log"})," API is no\r\nexception. There are a few options available:"]}),"\n",(0,o.jsx)(n.h3,{id:"wasm-logger",children:(0,o.jsx)(n.a,{href:"https://crates.io/crates/wasm-logger",children:(0,o.jsx)(n.code,{children:"wasm-logger"})})}),"\n",(0,o.jsxs)(n.p,{children:["This crate integrates with the familiar Rust ",(0,o.jsx)(n.code,{children:"log"})," crate:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-rust",children:'// setup\r\nfn main() {\r\n    wasm_logger::init(wasm_logger::Config::default());\r\n}\r\n\r\n// usage\r\nlog::info!("Update: {:?}", msg);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"consoleservice",children:(0,o.jsx)(n.a,{href:"https://docs.rs/yew/0.18.0/yew/services/console/struct.ConsoleService.html",children:(0,o.jsx)(n.code,{children:"ConsoleService"})})}),"\n",(0,o.jsx)(n.p,{children:'This service is included within Yew and is available when the "services" feature is enabled\r\n(the "services" feature is enabled by default):'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-rust",children:'use yew::services::ConsoleService;\r\n// usage\r\nConsoleService::info(format!("Update: {:?}", msg).as_ref());\n'})}),"\n",(0,o.jsx)(n.h2,{id:"source-maps",children:"Source Maps"}),"\n",(0,o.jsx)(n.p,{children:"There is currently no first-class support for source maps for Rust / Wasm web apps. This, of course, is subject to change. If this is no longer true or if progress is made, please suggest a change!"}),"\n",(0,o.jsx)(n.h3,{id:"latest-info",children:"Latest Info"}),"\n",(0,o.jsxs)(n.p,{children:["[Dec 2019] ",(0,o.jsx)(n.a,{href:"https://developers.google.com/web/updates/2019/12/webassembly#the_future",children:"Chrome DevTools update"})]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"There is still quite a bit of work to do though. For example, on the tooling side, Emscripten (Binaryen) and wasm-pack (wasm-bindgen) don\u2019t support updating DWARF information on transformations they perform yet."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["[2020] ",(0,o.jsx)(n.a,{href:"https://rustwasm.github.io/book/reference/debugging.html#using-a-debugger",children:"Rust Wasm debugging guide"})]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["Unfortunately, the debugging story for WebAssembly is still immature. On most Unix systems, ",(0,o.jsx)(n.a,{href:"http://dwarfstd.org/",children:"DWARF"})," is used to encode the information that a debugger needs to provide source-level inspection of a running program. There is an alternative format that encodes similar information on Windows. Currently, there is no equivalent for WebAssembly."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["[2019] ",(0,o.jsx)(n.a,{href:"https://rustwasm.github.io/rfcs/007-2019-roadmap.html#debugging",children:"Rust Wasm roadmap"})]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"Debugging is tricky because much of the story is out of this working group's hands, and depends on both the WebAssembly standardization bodies and the folks implementing browser developer tools instead."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var o=s(6540);const r={},t=o.createContext(r);function i(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);