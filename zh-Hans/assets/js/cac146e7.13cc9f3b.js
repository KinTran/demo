"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[4729],{1855:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var o=n(4848),r=n(8453);const t={},i="Debugging",a={id:"more/debugging",title:"Debugging",description:"Panics",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/version-0.20/more/debugging.mdx",sourceDirName:"more",slug:"/more/debugging",permalink:"/zh-Hans/docs/0.20/more/debugging",draft:!1,unlisted:!1,editUrl:"https://google.com/versioned_docs/version-0.20/more/debugging.mdx",tags:[],version:"0.20",frontMatter:{},sidebar:"docs",previous:{title:"More",permalink:"/zh-Hans/docs/0.20/category/more"},next:{title:"Deployment",permalink:"/zh-Hans/docs/0.20/more/deployment"}},c={},l=[{value:"Panics",id:"panics",level:2},{value:"Console Logging",id:"console-logging",level:2},{value:"<code>wasm-logger</code>",id:"wasm-logger",level:3},{value:"<strong>``</strong><strong><code>ConsoleService</code></strong><strong>``</strong>",id:"consoleservice",level:3},{value:"Source Maps",id:"source-maps",level:2},{value:"Latest Info",id:"latest-info",level:3}];function d(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"debugging",children:"Debugging"})}),"\n",(0,o.jsx)(s.h2,{id:"panics",children:"Panics"}),"\n",(0,o.jsxs)(s.p,{children:["Please use the ",(0,o.jsx)(s.a,{href:"https://github.com/rustwasm/console_error_panic_hook",children:(0,o.jsx)(s.code,{children:"console_error_panic"})})," crate for nicer stacktraces with Rust symbols. Note, that it is not compatible with apps built with ",(0,o.jsx)(s.code,{children:"cargo-web"}),"."]}),"\n",(0,o.jsx)(s.h2,{id:"console-logging",children:"Console Logging"}),"\n",(0,o.jsxs)(s.p,{children:["In general, Wasm web apps are able to interact with Browser APIs, and the ",(0,o.jsx)(s.code,{children:"console.log"})," api is no exception. There are a few options available:"]}),"\n",(0,o.jsx)(s.h3,{id:"wasm-logger",children:(0,o.jsx)(s.a,{href:"https://crates.io/crates/wasm-logger",children:(0,o.jsx)(s.code,{children:"wasm-logger"})})}),"\n",(0,o.jsxs)(s.p,{children:["This crate integrates with the familiar Rust ",(0,o.jsx)(s.code,{children:"log"})," crate:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-rust",children:'// setup\r\nfn main() {\r\n    wasm_logger::init(wasm_logger::Config::default());\r\n}\r\n\r\n// usage\r\nlog::info!("Update: {:?}", msg);\n'})}),"\n",(0,o.jsxs)(s.h3,{id:"consoleservice",children:[(0,o.jsx)(s.strong,{children:"``"}),(0,o.jsx)(s.a,{href:"https://docs.rs/yew/0.13.2/yew/services/console/struct.ConsoleService.html",children:(0,o.jsx)(s.strong,{children:(0,o.jsx)(s.code,{children:"ConsoleService"})})}),(0,o.jsx)(s.strong,{children:"``"})]}),"\n",(0,o.jsxs)(s.p,{children:["This service is included within yew and is available when the ",(0,o.jsx)(s.code,{children:'"services"'})," feature is enabled:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-rust",children:'// usage\r\nConsoleService::info(format!("Update: {:?}", msg).as_ref());\n'})}),"\n",(0,o.jsx)(s.h2,{id:"source-maps",children:"Source Maps"}),"\n",(0,o.jsx)(s.p,{children:"There is currently no first-class support for source maps for Rust / Wasm web apps. This, of course, is subject to change. If this is no longer true or if progress is made, please suggest a change!"}),"\n",(0,o.jsx)(s.h3,{id:"latest-info",children:"Latest Info"}),"\n",(0,o.jsxs)(s.p,{children:["[Dec 2019] ",(0,o.jsx)(s.a,{href:"https://developers.google.com/web/updates/2019/12/webassembly#the_future",children:"Chrome DevTools update"})]}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"There is still quite a bit of work to do though. For example, on the tooling side, Emscripten (Binaryen) and wasm-pack (wasm-bindgen) don\u2019t support updating DWARF information on transformations they perform yet."}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["[2020] ",(0,o.jsx)(s.a,{href:"https://rustwasm.github.io/book/reference/debugging.html#using-a-debugger",children:"Rust Wasm debugging guide"})]}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:["Unfortunately, the debugging story for WebAssembly is still immature. On most Unix systems, ",(0,o.jsx)(s.a,{href:"http://dwarfstd.org/",children:"DWARF"})," is used to encode the information that a debugger needs to provide source-level inspection of a running program. There is an alternative format that encodes similar information on Windows. Currently, there is no equivalent for WebAssembly."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["[2019] ",(0,o.jsx)(s.a,{href:"https://rustwasm.github.io/rfcs/007-2019-roadmap.html#debugging",children:"Rust Wasm roadmap"})]}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"Debugging is tricky because much of the story is out of this working group's hands, and depends on both the WebAssembly standardization bodies and the folks implementing browser developer tools instead."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>a});var o=n(6540);const r={},t=o.createContext(r);function i(e){const s=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(t.Provider,{value:s},e.children)}}}]);